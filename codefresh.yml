version: '1.0'

steps:
  build-step:
    type: build
    description: UC - build step
    image-name: codefreshio/yaml-example
    dockerfile: Dockerfile
    tag: ${{CF_BRANCH}}

  step-file-generation:
    type: composition
    composition:
      service-name:
        volumes:
          - ${{CF_VOLUME}}:/codefresh/volume
        image: ${{build-step}}
        command: bash -c "echo hello > /codefresh/volume/myfile.txt"
    composition-candidates:
      test:
        image: ${{build-step}}
        command: echo hello

  use previous file:
    image: alpine:latest
    working-directory: ${{initial-clone}}
    commands:
      - ls
      - echo using previous file. printing its content
      - cat /codefresh/volume/myfile.txt