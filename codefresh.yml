version: '1.0'

steps:
  build-prj:
    type: build
    description: UC - build step
    image-name: codefreshio/yaml-example
    dockerfile: Dockerfile
    tag: ${{CF_BRANCH}}

#  build-nginx:
#    type: build
#    image-name: codefreshio/nginx
#    dockerfile: nginx/Dockerfile
#    tag: ${{CF_BRANCH}}

  inline-composition:
    type: launch-composition
    environmentName: 'env-composition-name'
    composition:
      version: '2'
      services:
        web:
          image: ${{build-prj}}
        auth:
          image: beevelop/nginx-basic-auth
            ports:
              - "80:80"
            links:
              - web
#        auth:
#            image: ${{build-nginx}}
#            ports:
#              - 80
#            environment:
#              TITLE: "express-angular"
#              HOST: "app"
#              PORT: "80"
#              USER: "admin1"
#              PASS: "admin1"
#            links:
#              - app